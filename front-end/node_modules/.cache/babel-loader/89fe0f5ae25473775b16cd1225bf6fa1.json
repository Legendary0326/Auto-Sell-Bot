{"ast":null,"code":"import _slicedToArray from\"D:/Work Space/Auto-Sell-Bot/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{SiWebpack,AiFillTwitterCircle,RiDiscordLine,SiMarketo,AiOutlineStop,AiOutlineLogout,AiOutlineDelete}from'react-icons/all';import{ProgressBar}from'react-bootstrap';import tokenLogo from'../../assets/img/logo.webp';import MyModal from'../modal/BuyModalNew';import BuyModal from'../modal/BuyModal';import{useEthers,useTokenBalance}from\"@usedapp/core\";import{Container,Row,Col,Table}from'react-bootstrap';import axios from'axios';import{Toast}from'react-bootstrap';import{suniTokenAddress,nftTokenAddress,verificationCode}from'../../contract_ABI/vestingData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var base_api_url=\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":3000/api\");export default function TokenDetail(){var unmounted=useRef(true);var project={name:'SUNI',status:'Open',message:'You can sell any token daily'};var currentTime=Math.round(new Date().getTime()/1000);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpenBuy=_useState4[0],setIsOpenBuy=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showToastBuy=_useState6[0],setShowToastBuy=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),toastTextBuy=_useState8[0],setToastTextBuy=_useState8[1];var _useEthers=useEthers(),account=_useEthers.account,chainId=_useEthers.chainId;var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),tokenAddress=_useState10[0],setTokenAddress=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),tokenAmount=_useState12[0],setTokenAmount=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),tokenAddressForDel=_useState14[0],setTokenAddressForDel=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),allData=_useState16[0],setAllData=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),privateKey=_useState18[0],setPrivateKey=_useState18[1];var suniBalance=useTokenBalance(suniTokenAddress,account)/Math.pow(10,18);useEffect(function(){getPrivateKey();return function(){unmounted.current=false;};},[]);useEffect(function(){getDataAll();getPrivateKey();return function(){unmounted.current=false;};},[account,isOpenBuy]);useEffect(function(){if(!privateKey){setIsOpen(true);}else{setIsOpen(false);}return function(){unmounted.current=false;};},[privateKey]);function getPrivateKey(){var apiUrl=base_api_url+'/getPrivateKey';console.log('apiUrl',apiUrl);var params={walletAddress:account};axios.post(apiUrl,params).then(function(response){console.log('privatekey:',response.data);setPrivateKey(response.data.privateKey);}).catch(function(error){console.error(error);return false;});}function getDataAll(){var apiUrl=base_api_url+'/getDataAll';console.log('apiUrl',apiUrl);var params={walletAddress:account};axios.post(apiUrl,params).then(function(response){console.log('msg',response.data.data);setAllData(response.data.data);}).catch(function(error){console.error(error);return false;});}function handleSetPrivatKey(){setIsOpen(true);}function handleAddSale(){if(!tokenAddress){setToastTextBuy('please input the token address exactly!');setShowToastBuy(true);}else if(tokenAmount<=0){setToastTextBuy('please input the token amount exactly!');setShowToastBuy(true);}else{var apiUrl=base_api_url+'/addData';console.log('apiUrl',apiUrl);var params={walletAddress:account,tokenAddress:tokenAddress,tokenAmount:tokenAmount};axios.post(apiUrl,params).then(function(response){console.log('msg',response.msg);getDataAll();}).catch(function(error){console.error(error);return false;});}}function handleUpdate(tokenAddress,status){var apiUrl=base_api_url+'/updateData';var params={walletAddress:account,tokenAddress:tokenAddress,status:status};console.log('apiUrl',apiUrl,params);axios.post(apiUrl,params).then(function(response){console.log('msg',response.msg);getDataAll();}).catch(function(error){console.error(error);return false;});}function handleDelete(tokenAddress){setTokenAddressForDel(tokenAddress);setIsOpenBuy(true);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:5,children:/*#__PURE__*/_jsxs(\"section\",{className:\"mt-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toekn-detail-header d-flex mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"custom-card-title\",children:/*#__PURE__*/_jsx(\"img\",{className:\"tokenLogo mt-auto\",src:tokenLogo,alt:\"project profile\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-card-title\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-white mb-auto  tokenLogoTitle\",children:\"Auto Sell App\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-card-title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buyBtnContainer d-flex\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status\",children:\"USDT\"}),\" \\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"status\",children:\"Any Token\"})]}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white my-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"my-2\",children:project.message})})]})})]})}),/*#__PURE__*/_jsx(Col,{sm:7,children:/*#__PURE__*/_jsxs(\"section\",{className:\"custom-card text-gray\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid-box text-white\",children:[/*#__PURE__*/_jsx(\"div\",{children:\" Your USDT Balance \"}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingRight:'3rem'},children:[\" \",!suniBalance?'-':suniBalance+' SUNI',\" \"]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"bg-gray-100\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-box\",children:[/*#__PURE__*/_jsx(\"div\",{children:\" Token Address \"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",onChange:function onChange(e){return setTokenAddress(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid-box text-white mb-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-box text-white\",children:[/*#__PURE__*/_jsx(\"div\",{children:\" Token Amount \"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"number\",onChange:function onChange(e){return setTokenAmount(e.target.value);},step:\"0.01\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"bg-gray-100\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid-box\",children:[/*#__PURE__*/_jsx(\"div\",{children:\" \"}),/*#__PURE__*/_jsx(\"div\",{children:account&&privateKey&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-wallet btn-add m-auto\",onClick:handleAddSale,children:\" Add New Token Sale\"})||account&&!privateKey&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-wallet btn-add m-auto\",onClick:handleSetPrivatKey,children:\" Set Your Private Key\"})||/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-wallet btn-add m-auto\",onClick:handleAddSale,disabled:true,children:\" Add New Token Sale\"})})]})]})}),/*#__PURE__*/_jsx(Col,{sm:12,children:/*#__PURE__*/_jsxs(Table,{responsive:\"sm\",className:\"text-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Token Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Operation\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allData&&allData.length!=0&&allData.map(function(data,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:data.tokenAddress}),/*#__PURE__*/_jsx(\"td\",{children:data.tokenAmount}),/*#__PURE__*/_jsx(\"td\",{children:data.status?'running':'stopped'}),/*#__PURE__*/_jsxs(\"td\",{children:[data.status?/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-wallet wallet-connected mr-2\",onClick:function onClick(){return handleUpdate(data.tokenAddress,false);},children:[/*#__PURE__*/_jsx(AiOutlineStop,{className:\"btn-icon\"}),\" Stop\"]}):/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-wallet wallet-connected mr-2\",onClick:function onClick(){return handleUpdate(data.tokenAddress,true);},children:[/*#__PURE__*/_jsx(AiOutlineLogout,{className:\"btn-icon\"}),\" Run \\xA0 \"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-wallet wallet-connected m-auto\",onClick:function onClick(){return handleDelete(data.tokenAddress);},children:[/*#__PURE__*/_jsx(AiOutlineDelete,{className:\"btn-icon\"}),\" Delete\"]})]})]});})})]})})]})}),/*#__PURE__*/_jsx(MyModal,{isOpen:isOpen,setIsOpen:setIsOpen,onlyOneToast:true}),/*#__PURE__*/_jsx(BuyModal,{isOpen:isOpenBuy,setIsOpen:setIsOpenBuy,tokenAddress:tokenAddressForDel}),/*#__PURE__*/_jsxs(Toast,{onClose:function onClose(){return setShowToastBuy(false);},show:showToastBuy,delay:7000,autohide:true,children:[/*#__PURE__*/_jsxs(Toast.Header,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"holder.js/20x20?text=%20\",className:\"rounded me-2\",alt:\"\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"me-auto\",children:\"Notice\"}),/*#__PURE__*/_jsx(\"small\",{className:\"mr-auto\"})]}),/*#__PURE__*/_jsx(Toast.Body,{children:toastTextBuy})]})]});}","map":{"version":3,"sources":["D:/Work Space/Auto-Sell-Bot/front-end/src/components/Project/TokenDetail.js"],"names":["React","useState","useEffect","useRef","SiWebpack","AiFillTwitterCircle","RiDiscordLine","SiMarketo","AiOutlineStop","AiOutlineLogout","AiOutlineDelete","ProgressBar","tokenLogo","MyModal","BuyModal","useEthers","useTokenBalance","Container","Row","Col","Table","axios","Toast","suniTokenAddress","nftTokenAddress","verificationCode","base_api_url","window","location","protocol","hostname","TokenDetail","unmounted","project","name","status","message","currentTime","Math","round","Date","getTime","isOpen","setIsOpen","isOpenBuy","setIsOpenBuy","showToastBuy","setShowToastBuy","toastTextBuy","setToastTextBuy","account","chainId","tokenAddress","setTokenAddress","tokenAmount","setTokenAmount","tokenAddressForDel","setTokenAddressForDel","allData","setAllData","privateKey","setPrivateKey","suniBalance","getPrivateKey","current","getDataAll","apiUrl","console","log","params","walletAddress","post","then","response","data","catch","error","handleSetPrivatKey","handleAddSale","msg","handleUpdate","handleDelete","paddingRight","e","target","value","length","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nimport { SiWebpack, AiFillTwitterCircle, RiDiscordLine, SiMarketo, AiOutlineStop, AiOutlineLogout, AiOutlineDelete } from 'react-icons/all';\nimport { ProgressBar } from 'react-bootstrap';\nimport tokenLogo from '../../assets/img/logo.webp';\nimport MyModal from '../modal/BuyModalNew';\nimport BuyModal from '../modal/BuyModal';\nimport { useEthers, useTokenBalance } from \"@usedapp/core\";\nimport { Container, Row, Col, Table } from 'react-bootstrap';\nimport axios from 'axios';\nimport { Toast} from 'react-bootstrap';\nimport { \n    suniTokenAddress, \n    nftTokenAddress,\n    verificationCode \n} from '../../contract_ABI/vestingData';\n\nconst base_api_url = `${window.location.protocol}//${window.location.hostname}:3000/api`;\n\nexport default function TokenDetail() {\n    const unmounted = useRef(true);\n    const project = {\n        name: 'SUNI',\n        status: 'Open',\n        message: 'You can sell any token daily'\n    };\n\n    const currentTime = Math.round(new Date().getTime()/1000);\n    const [isOpen, setIsOpen] = useState(false);\n    const [isOpenBuy, setIsOpenBuy] = useState(false);\n    const [showToastBuy, setShowToastBuy] = useState(false);\n    const [toastTextBuy, setToastTextBuy] = useState('');\n    const {account, chainId} = useEthers();\n\n    const [tokenAddress, setTokenAddress] = useState('');\n    const [tokenAmount, setTokenAmount] = useState('');\n    const [tokenAddressForDel, setTokenAddressForDel] = useState('');\n    const [allData, setAllData] = useState();\n    const [privateKey, setPrivateKey] = useState();\n\n    const suniBalance = useTokenBalance(suniTokenAddress, account) / 10 ** 18;\n\n    useEffect( () => {\n        getPrivateKey();\n        return () => { unmounted.current = false }\n    }, []);\n\n    useEffect( () => {\n        getDataAll();\n        getPrivateKey();\n\n        return () => { unmounted.current = false }\n    }, [account, isOpenBuy]);\n\n    useEffect( () => {\n        if(!privateKey){\n            setIsOpen(true);\n        } else{\n            setIsOpen(false);\n        }\n        return () => { unmounted.current = false }\n    }, [privateKey]);\n\n    function getPrivateKey() {\n        var apiUrl = base_api_url + '/getPrivateKey';\n        console.log('apiUrl', apiUrl);\n        var params = {\n            walletAddress: account\n        };\n\n        axios.post(apiUrl, params).then(function (response) {\n            console.log('privatekey:', response.data);\n            setPrivateKey(response.data.privateKey);\n            \n        }).catch(function (error) {\n            console.error(error);\n            return false;\n        });\n    }\n\n    function getDataAll() {\n        var apiUrl = base_api_url + '/getDataAll'\n        console.log('apiUrl', apiUrl);\n        var params = {\n            walletAddress: account\n        };\n\n        axios.post(apiUrl, params).then(function (response) {\n            console.log('msg', response.data.data);\n            setAllData(response.data.data);\n            \n        }).catch(function (error) {\n            console.error(error);\n            return false;\n        });\n    }\n\n    function handleSetPrivatKey(){\n        setIsOpen(true);\n    }\n\n    function handleAddSale() {\n        if(!tokenAddress){\n            setToastTextBuy('please input the token address exactly!');\n            setShowToastBuy(true);\n        }else if(tokenAmount <= 0){\n            setToastTextBuy('please input the token amount exactly!');\n            setShowToastBuy(true);\n        }else {\n\n            var apiUrl = base_api_url + '/addData';\n            console.log('apiUrl', apiUrl);\n            var params = {\n                walletAddress: account,\n                tokenAddress: tokenAddress,\n                tokenAmount: tokenAmount\n            };\n    \n            axios.post(apiUrl, params).then(function (response) {\n                console.log('msg', response.msg);\n                getDataAll();\n                \n            }).catch(function (error) {\n                console.error(error);\n                return false;\n            });\n        }\n    }\n\n    function handleUpdate(tokenAddress, status) {\n        var apiUrl = base_api_url + '/updateData'\n        var params = {\n            walletAddress: account,\n            tokenAddress: tokenAddress,\n            status: status\n        };\n        console.log('apiUrl', apiUrl, params);\n        axios.post(apiUrl, params).then(function (response) {\n            console.log('msg', response.msg);\n            getDataAll();\n            \n        }).catch(function (error) {\n            console.error(error);\n            return false;\n        });\n    }\n    \n    function handleDelete(tokenAddress) {\n        setTokenAddressForDel(tokenAddress);\n        setIsOpenBuy(true);\n    }\n\n    return (\n        <>\n            <Container>\n                <Row>\n                    <Col sm={5}>\n                        <section className=\"mt-auto\">\n                            <div className=\"toekn-detail-header d-flex mt-5\">\n                                <div className=\"custom-card-title\"><img className=\"tokenLogo mt-auto\" src={tokenLogo} alt=\"project profile\"></img></div>\n                                <div className=\"custom-card-title\"><h2 className=\"text-white mb-auto  tokenLogoTitle\">Auto Sell App</h2></div>\n                            </div>\n                            <div className=\"custom-card-header\">\n                                <div className=\"custom-card-title\">\n                                    <div className=\"grid-box\">\n                                        <div className=\"buyBtnContainer d-flex\">\n                                            <span className=\"status\">USDT</span> &nbsp;&nbsp;&nbsp;\n                                            <span className=\"status\">Any Token</span>\n                                        </div>\n                                        {/* <div className=\"social-links\">\n                                            <a href=\"https://sassyunicorns.io/\"><SiWebpack className=\"social-link\" /></a>\n                                            <a href=\"https://twitter.com/SassyUnicornNFT\"><AiFillTwitterCircle className=\"social-link\" /></a>\n                                            <a href=\"https://discord.gg/2PjVUrJvDJ\"><RiDiscordLine className=\"social-link\" /></a>\n                                            <a href=\"https://opensea.io/collection/sassy-unicorns\"><SiMarketo className=\"social-link\" /></a>\n                                        </div> */}\n                                        <div></div>\n                                    </div>\n                                    <div className=\"text-white my-4\">\n                                        <div className=\"my-2\">\n                                            {project.message}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                    </Col>\n                    <Col sm={7}>\n                        <section className=\"custom-card text-gray\">\n                            <div className=\"grid-box text-white\">\n                                <div> Your USDT Balance </div>\n                                <div style={{paddingRight: '3rem'}}> {!suniBalance ? ('-') : (suniBalance + ' SUNI')} </div>\n                            </div>\n                            <hr className=\"bg-gray-100\" />\n                            <div className=\"grid-box\">\n                                <div> Token Address </div>\n                                <input className='form-control' type=\"text\" onChange={e => setTokenAddress(e.target.value)}/>\n                            </div>\n                            <div className=\"grid-box text-white mb-2\">\n                            </div>\n                            <div className=\"grid-box text-white\">\n                                <div> Token Amount </div>\n                                <input className='form-control' type=\"number\" onChange={e => setTokenAmount(e.target.value)} step=\"0.01\" />\n                            </div>\n                            <hr className=\"bg-gray-100\" />\n                            <div className=\"grid-box\">\n                                <div> </div>\n                                <div> \n                                    {(account && privateKey) && (\n                                        <button className=\"btn btn-wallet btn-add m-auto\" onClick = { handleAddSale }> Add New Token Sale</button> \n                                    ) || (account && !privateKey) && (\n                                        <button className=\"btn btn-wallet btn-add m-auto\" onClick = { handleSetPrivatKey }> Set Your Private Key</button> \n                                    ) || (\n                                        <button className=\"btn btn-wallet btn-add m-auto\" onClick = { handleAddSale } disabled> Add New Token Sale</button> \n                                    )}\n                                </div>\n                            </div>\n                        </section>\n                    </Col>\n                    <Col sm={12}>\n                        <Table responsive=\"sm\" className=\"text-white\">\n                            <thead>\n                                <tr>\n                                    <th>No</th>\n                                    <th>Token Address</th>\n                                    <th>Amount</th>\n                                    <th>Status</th>\n                                    <th>Operation</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                            {\n                                (allData && allData.length != 0) && allData.map((data, index) => {\n                                    return (\n                                        <tr>\n                                            <td>{index + 1}</td>\n                                            <td>{data.tokenAddress}</td>\n                                            <td>{data.tokenAmount}</td>\n                                            <td>{data.status ? 'running' : 'stopped'}</td>\n                                            <td>\n                                                {data.status ? <button className=\"btn btn-wallet wallet-connected mr-2\" onClick = { () => handleUpdate(data.tokenAddress, false) }><AiOutlineStop className=\"btn-icon\"></AiOutlineStop> Stop</button> : <button className=\"btn btn-wallet wallet-connected mr-2\" onClick = { () => handleUpdate(data.tokenAddress, true) }><AiOutlineLogout className=\"btn-icon\"></AiOutlineLogout> Run &nbsp; </button>}\n                                                <button className=\"btn btn-wallet wallet-connected m-auto\" onClick = { () => handleDelete(data.tokenAddress) }><AiOutlineDelete className=\"btn-icon\"></AiOutlineDelete> Delete</button>\n                                            </td>\n                                        </tr>\n                                    );\n                                })\n                            }\n                            </tbody>\n                        </Table>\n                    </Col>\n                </Row>\n            </Container>\n            <MyModal isOpen = { isOpen } setIsOpen = {setIsOpen} onlyOneToast = {true}/>\n            <BuyModal isOpen = { isOpenBuy } setIsOpen = {setIsOpenBuy} tokenAddress = {tokenAddressForDel}/>\n\n            <Toast onClose={() => setShowToastBuy(false)} show={showToastBuy} delay={7000} autohide>\n                <Toast.Header>\n                    <img\n                    src=\"holder.js/20x20?text=%20\"\n                    className=\"rounded me-2\"\n                    alt=\"\"\n                    />\n                    <strong className=\"me-auto\">Notice</strong>\n                    <small className=\"mr-auto\"></small>\n                </Toast.Header>\n                <Toast.Body>{ toastTextBuy }</Toast.Body>\n            </Toast>\n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}